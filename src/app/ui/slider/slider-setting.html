<div ng-show="self.sliderService.isSettingOpen">
    <div class="rv-slider-limits" style="display:flex">
            <md-input-container class="md-block" md-no-float flex>
                <label>{{ 'slider.settings.type' | translate }}</label>
                <md-select
                    aria-label="{{ 'slider.settings.type' | translate }}" translate
                    ng-model="self.selectedType"
                    md-on-close="self.updateType()">
                    <md-option ng-repeat="(key, value) in self.types" ng-value="key" ng-selected="$index === 0">
                        {{ value }}
                    </md-option>
                </md-select>
            </md-input-container>
            <md-input-container ng-if="self.selectedType === 'category'" class="md-block" md-no-float flex>
                    <label>{{ 'slider.settings.interval' | translate }}</label>
                    <md-select
                        aria-label="{{ 'slider.settings.interval' | translate }}" translate
                        ng-model="self.selectedInterval"
                        md-on-close="self.updateInterval()">
                        <md-option ng-repeat="(key, value) in self.categoryVal" ng-value="{{ key }}" ng-selected="$index === 0">
                            {{ value }}
                        </md-option>
                    </md-select>
                </md-input-container>
            <md-input-container ng-if="self.selectedType !== 'category'" class="md-block" md-no-float flex>
                <label>{{ 'slider.settings.interval' | translate }}</label>
                <md-select
                    aria-label="{{ 'slider.settings.interval' | translate }}" translate
                    ng-model="self.selectedInterval"
                    md-on-close="self.updateInterval()">
                    <md-option ng-repeat="(key, value) in {} | rvRange: '2':'100'" ng-value="{{ key }}" ng-selected="{{ key }} === 10">
                        {{ value }}
                    </md-option>
                </md-select>
            </md-input-container>
            <div ng-if="self.selectedType === 'number'">
                <md-input-container>
                    <input type="number" required md-no-asterisk="true"
                        aria-label="{{ 'slider.settings.limitmin' | translate }}" translate
                        ng-pattern="/\d/"
                        step="any"
                        placeholder="{{ 'slider.settings.limitmin' | translate }}"
                        ng-model="self.sliderService.limits.number.min"
                        ng-model-options="{ debounce: { default: 750, blur: 0 } }"
                        ng-change="self.updateLimits()">
                 </md-input-container>
                <md-input-container>
                    <input type="number" required md-no-asterisk="true"
                        aria-label="{{ 'slider.settings.limitmax' | translate }}" translate
                        ng-pattern="/\d/"
                        step="any"
                        placeholder="{{ 'slider.settings.limitmax' | translate }}"
                        ng-model="self.sliderService.limits.number.max"
                        ng-model-options="{ debounce: { default: 750, blur: 0 } }"
                        ng-change="self.updateLimits()">
                </md-input-container>
            </div>
            <div ng-if="self.selectedType === 'date'">
                <md-input-container>
                    <label>{{ 'slider.settings.limitmin' | translate }}</label>
                    <md-datepicker required
                        ng-click="self.prevent($event)"
                        ng-change="self.updateLimits()"
                        ng-model="self.sliderService.limits.date.min"
                        md-placeholder="{{ 'slider.settings.limitmin' | translate }}">
                </md-datepicker>
                </md-input-container>
                <md-input-container>
                    <label>{{ 'slider.settings.limitmax' | translate }}</label>
                    <md-datepicker required
                        ng-click="self.prevent($event)"
                        ng-change="self.updateLimits()"
                        ng-model="self.sliderService.limits.date.max"
                        md-placeholder="{{ 'slider.settings.limitmax' | translate }}">
                    </md-datepicker>
                </md-input-container>
            </div>
    </div>
    <md-divider></md-divider>
    <ul class="rv-list rv-slider-list">
        <li class="rv-slider-list-item">
            <div class="rv-slider-item-name">
                <md-input-container class="md-block" md-no-float flex>
                    <label>{{ 'slider.settings.layer' | translate }}</label>
                    <md-select
                        aria-label="{{ 'slider.settings.layer' | translate }}" translate
                        ng-model="self.selectedLayerId"
                        md-on-close="self.updateLayer()">
                        <md-option ng-repeat="(key, value) in self.sliderService.layersName" ng-value="key" ng-selected="$index === 0">
                                {{ value }}
                        </md-option>
                    </md-select>
                </md-input-container>
            </div>
            <div class="rv-slider-item-filter">
                <md-input-container class="md-block" md-no-float flex>
                    <label>{{ 'slider.settings.field' | translate }}</label>
                    <md-select
                        aria-label="{{ 'slider.settings.field' | translate }}" translate
                        ng-model="self.activeLayer.slider.selectedAttribute"
                        md-on-close="self.updateAttribute(self.activeLayer)">
                        <md-option ng-repeat="(key, value) in self.activeLayer.slider.fields[self.selectedType]" ng-value="key" ng-selected="$index === 0">
                                {{ key }} - {{ value }}
                        </md-option>
                    </md-select>
                </md-input-container>
            </div>
            <!-- <md-input-container>
                <label>{{ 'slider.settings.minmax' | translate }}</label>
                <input type="string" readonly
                    aria-label="{{ 'slider.settings.minmax' | translate }}" translate
                    value="{{ self.activeLayer.slider.limitMin }} / {{ self.activeLayer.slider.limitMax }}">
                </input>
            </md-input-container> -->
            <div ng-if="self.selectedType === 'number'">
                <md-input-container>
                    <input type="number" required md-no-asterisk="true"
                        aria-label="{{ 'slider.settings.rangemin' | translate }}" translate
                        ng-pattern="/\d/"
                        step="any"
                        placeholder="{{ 'slider.settings.rangemin' | translate }}"
                        ng-model="self.activeLayer.slider.ranges.number.min"
                        ng-model-options="{ debounce: { default: 750, blur: 0 } }"
                        ng-change="self.updateRange()">
                </md-input-container>
                <md-input-container>
                    <input type="number" required md-no-asterisk="true"
                        aria-label="{{ 'slider.settings.rangemax' | translate }}" translate
                        ng-pattern="/\d/"
                        step="any"
                        placeholder="{{ 'slider.settings.rangemax' | translate }}"
                        ng-model="self.activeLayer.slider.ranges.number.max"
                        ng-model-options="{ debounce: { default: 750, blur: 0 } }"
                        ng-change="self.updateRange()">
                </md-input-container>
            </div>
            <div ng-if="self.selectedType === 'date'">
                <md-input-container>
                    <label>{{ 'slider.settings.rangemin' | translate }}</label>
                    <md-datepicker required
                        ng-click="self.prevent($event)"
                        ng-change="self.updateRange()"
                        ng-model="self.activeLayer.slider.ranges.date.min"
                        md-placeholder="Limit Min">
                    </md-datepicker>
                </md-input-container>
                <md-input-container>
                    <label>{{ 'slider.settings.rangemax' | translate }}</label>
                    <md-datepicker required
                        ng-click="self.prevent($event)"
                        ng-change="self.updateRange()"
                        ng-model="self.activeLayer.slider.ranges.date.max"
                        md-placeholder="Limit Max">
                    </md-datepicker>
                </md-input-container>
            </div>
            <md-input-container>
                <label>{{ 'slider.settings.selected' | translate }}</label>
                <input type="string" readonly
                    aria-label="{{ 'slider.settings.selected' | translate }}" translate
                    value="{{ self.activeLayer.slider.selectCount }} - {{ self.activeLayer.slider.percentCount }}%">
                </input>
            </md-input-container>
        </li>
    </ul>
    <md-divider></md-divider>
</div>